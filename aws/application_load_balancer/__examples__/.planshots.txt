

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
+ create

Terraform will perform the following actions:

+ module.acme_staging_load_balancer.aws_alb_listener.http_listener
id:                                                   <computed>
arn:                                                  <computed>
default_action.#:                                     "1"
default_action.0.target_group_arn:                    "${aws_alb_target_group.http_target_group.arn}"
default_action.0.type:                                "forward"
load_balancer_arn:                                    "${module.load_balancer.arn}"
port:                                                 "80"
protocol:                                             "HTTP"
ssl_policy:                                           <computed>

+ module.acme_staging_load_balancer.aws_alb_listener.https_listener
id:                                                   <computed>
arn:                                                  <computed>
certificate_arn:                                      "arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012"
default_action.#:                                     "1"
default_action.0.target_group_arn:                    "${var.https_target_group ? element(concat(aws_alb_target_group.https_target_group.*.arn, list(\"\")), 0) : aws_alb_target_group.http_target_group.arn}"
default_action.0.type:                                "forward"
load_balancer_arn:                                    "${module.load_balancer.arn}"
port:                                                 "443"
protocol:                                             "HTTPS"
ssl_policy:                                           "ELBSecurityPolicy-TLS-1-2-2017-01"

+ module.acme_staging_load_balancer.aws_alb_target_group.http_target_group
id:                                                   <computed>
arn:                                                  <computed>
arn_suffix:                                           <computed>
deregistration_delay:                                 "30"
health_check.#:                                       "1"
health_check.0.healthy_threshold:                     "3"
health_check.0.interval:                              "30"
health_check.0.matcher:                               "200,301"
health_check.0.path:                                  "/healthz"
health_check.0.port:                                  "80"
health_check.0.protocol:                              "HTTP"
health_check.0.timeout:                               "5"
health_check.0.unhealthy_threshold:                   "3"
name:                                                 "acme-staging-http"
port:                                                 "80"
protocol:                                             "HTTP"
proxy_protocol_v2:                                    "false"
slow_start:                                           "0"
stickiness.#:                                         <computed>
target_type:                                          "instance"
vpc_id:                                               "vpc-eed63643"

+ module.acme_staging_load_balancer.aws_alb_target_group.https_target_group
id:                                                   <computed>
arn:                                                  <computed>
arn_suffix:                                           <computed>
deregistration_delay:                                 "30"
health_check.#:                                       "1"
health_check.0.healthy_threshold:                     "3"
health_check.0.interval:                              "30"
health_check.0.matcher:                               "200,301"
health_check.0.path:                                  "/healthz"
health_check.0.port:                                  "443"
health_check.0.protocol:                              "HTTPS"
health_check.0.timeout:                               "5"
health_check.0.unhealthy_threshold:                   "3"
name:                                                 "acme-staging-https"
port:                                                 "443"
protocol:                                             "HTTPS"
proxy_protocol_v2:                                    "false"
slow_start:                                           "0"
stickiness.#:                                         <computed>
target_type:                                          "instance"
vpc_id:                                               "vpc-eed63643"

+ module.acme_staging_load_balancer.aws_alb_target_group_attachment.http_target_group_attachments[0]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.http_target_group.arn}"
target_id:                                            "i-09731747ba5296355"

+ module.acme_staging_load_balancer.aws_alb_target_group_attachment.http_target_group_attachments[1]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.http_target_group.arn}"
target_id:                                            "i-0354a7616ba0dc1af"

+ module.acme_staging_load_balancer.aws_alb_target_group_attachment.https_target_group_attachments[0]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.https_target_group.arn}"
target_id:                                            "i-09731747ba5296355"

+ module.acme_staging_load_balancer.aws_alb_target_group_attachment.https_target_group_attachments[1]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.https_target_group.arn}"
target_id:                                            "i-0354a7616ba0dc1af"

+ module.acme_staging_load_balancer.aws_security_group.security_group_on_load_balancer
id:                                                   <computed>
arn:                                                  <computed>
description:                                          "Managed by Terraform"
egress.#:                                             "1"
egress.1010347201.cidr_blocks.#:                      "0"
egress.1010347201.description:                        ""
egress.1010347201.from_port:                          "0"
egress.1010347201.ipv6_cidr_blocks.#:                 "0"
egress.1010347201.prefix_list_ids.#:                  "0"
egress.1010347201.protocol:                           "tcp"
egress.1010347201.security_groups.#:                  "1"
egress.1010347201.security_groups.686130460:          "sg-c94a8777"
egress.1010347201.self:                               "false"
egress.1010347201.to_port:                            "65535"
ingress.#:                                            "2"
ingress.2214680975.cidr_blocks.#:                     "1"
ingress.2214680975.cidr_blocks.0:                     "0.0.0.0/0"
ingress.2214680975.description:                       ""
ingress.2214680975.from_port:                         "80"
ingress.2214680975.ipv6_cidr_blocks.#:                "0"
ingress.2214680975.protocol:                          "tcp"
ingress.2214680975.security_groups.#:                 "0"
ingress.2214680975.self:                              "false"
ingress.2214680975.to_port:                           "80"
ingress.2617001939.cidr_blocks.#:                     "1"
ingress.2617001939.cidr_blocks.0:                     "0.0.0.0/0"
ingress.2617001939.description:                       ""
ingress.2617001939.from_port:                         "443"
ingress.2617001939.ipv6_cidr_blocks.#:                "0"
ingress.2617001939.protocol:                          "tcp"
ingress.2617001939.security_groups.#:                 "0"
ingress.2617001939.self:                              "false"
ingress.2617001939.to_port:                           "443"
name:                                                 "acme-staging-alb"
owner_id:                                             <computed>
revoke_rules_on_delete:                               "false"
vpc_id:                                               "vpc-eed63643"

+ module.acme_staging_load_balancer.aws_security_group_rule.http_ingress_on_instances_from_load_balancer
id:                                                   <computed>
from_port:                                            "80"
protocol:                                             "tcp"
security_group_id:                                    "sg-c94a8777"
self:                                                 "false"
source_security_group_id:                             "${aws_security_group.security_group_on_load_balancer.id}"
to_port:                                              "80"
type:                                                 "ingress"

+ module.acme_staging_load_balancer.aws_security_group_rule.https_ingress_on_instances_from_load_balancer
id:                                                   <computed>
from_port:                                            "443"
protocol:                                             "tcp"
security_group_id:                                    "sg-c94a8777"
self:                                                 "false"
source_security_group_id:                             "${aws_security_group.security_group_on_load_balancer.id}"
to_port:                                              "443"
type:                                                 "ingress"

+ module.globex_production_load_balancer.aws_alb_listener.http_listener
id:                                                   <computed>
arn:                                                  <computed>
default_action.#:                                     "1"
default_action.0.target_group_arn:                    "${aws_alb_target_group.http_target_group.arn}"
default_action.0.type:                                "forward"
load_balancer_arn:                                    "${module.load_balancer.arn}"
port:                                                 "80"
protocol:                                             "HTTP"
ssl_policy:                                           <computed>

+ module.globex_production_load_balancer.aws_alb_listener.https_listener
id:                                                   <computed>
arn:                                                  <computed>
certificate_arn:                                      "arn:aws:acm:us-east-1:210987654321:certificate/87654321-4321-4321-4321-210987654321"
default_action.#:                                     "1"
default_action.0.target_group_arn:                    "${var.https_target_group ? element(concat(aws_alb_target_group.https_target_group.*.arn, list(\"\")), 0) : aws_alb_target_group.http_target_group.arn}"
default_action.0.type:                                "forward"
load_balancer_arn:                                    "${module.load_balancer.arn}"
port:                                                 "443"
protocol:                                             "HTTPS"
ssl_policy:                                           "ELBSecurityPolicy-TLS-1-0-2015-04"

+ module.globex_production_load_balancer.aws_alb_target_group.http_target_group
id:                                                   <computed>
arn:                                                  <computed>
arn_suffix:                                           <computed>
deregistration_delay:                                 "30"
health_check.#:                                       "1"
health_check.0.healthy_threshold:                     "3"
health_check.0.interval:                              "30"
health_check.0.matcher:                               "200,301"
health_check.0.path:                                  "/health_check"
health_check.0.port:                                  "80"
health_check.0.protocol:                              "HTTP"
health_check.0.timeout:                               "5"
health_check.0.unhealthy_threshold:                   "3"
name:                                                 "globex-production-http"
port:                                                 "80"
protocol:                                             "HTTP"
proxy_protocol_v2:                                    "false"
slow_start:                                           "0"
stickiness.#:                                         <computed>
target_type:                                          "instance"
vpc_id:                                               "vpc-e365d769"

+ module.globex_production_load_balancer.aws_alb_target_group.https_target_group
id:                                                   <computed>
arn:                                                  <computed>
arn_suffix:                                           <computed>
deregistration_delay:                                 "30"
health_check.#:                                       "1"
health_check.0.healthy_threshold:                     "3"
health_check.0.interval:                              "30"
health_check.0.matcher:                               "200,301"
health_check.0.path:                                  "/health_check"
health_check.0.port:                                  "443"
health_check.0.protocol:                              "HTTPS"
health_check.0.timeout:                               "5"
health_check.0.unhealthy_threshold:                   "3"
name:                                                 "globex-production-https"
port:                                                 "443"
protocol:                                             "HTTPS"
proxy_protocol_v2:                                    "false"
slow_start:                                           "0"
stickiness.#:                                         <computed>
target_type:                                          "instance"
vpc_id:                                               "vpc-e365d769"

+ module.globex_production_load_balancer.aws_alb_target_group_attachment.http_target_group_attachments[0]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.http_target_group.arn}"
target_id:                                            "i-088348c7b2bd8ebfd"

+ module.globex_production_load_balancer.aws_alb_target_group_attachment.http_target_group_attachments[1]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.http_target_group.arn}"
target_id:                                            "i-04711668341adedf1"

+ module.globex_production_load_balancer.aws_alb_target_group_attachment.https_target_group_attachments[0]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.https_target_group.arn}"
target_id:                                            "i-088348c7b2bd8ebfd"

+ module.globex_production_load_balancer.aws_alb_target_group_attachment.https_target_group_attachments[1]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.https_target_group.arn}"
target_id:                                            "i-04711668341adedf1"

+ module.globex_production_load_balancer.aws_security_group.security_group_on_load_balancer
id:                                                   <computed>
arn:                                                  <computed>
description:                                          "Managed by Terraform"
egress.#:                                             "1"
egress.2892170438.cidr_blocks.#:                      "0"
egress.2892170438.description:                        ""
egress.2892170438.from_port:                          "0"
egress.2892170438.ipv6_cidr_blocks.#:                 "0"
egress.2892170438.prefix_list_ids.#:                  "0"
egress.2892170438.protocol:                           "tcp"
egress.2892170438.security_groups.#:                  "1"
egress.2892170438.security_groups.3427799827:         "sg-264269ad"
egress.2892170438.self:                               "false"
egress.2892170438.to_port:                            "65535"
ingress.#:                                            "2"
ingress.2214680975.cidr_blocks.#:                     "1"
ingress.2214680975.cidr_blocks.0:                     "0.0.0.0/0"
ingress.2214680975.description:                       ""
ingress.2214680975.from_port:                         "80"
ingress.2214680975.ipv6_cidr_blocks.#:                "0"
ingress.2214680975.protocol:                          "tcp"
ingress.2214680975.security_groups.#:                 "0"
ingress.2214680975.self:                              "false"
ingress.2214680975.to_port:                           "80"
ingress.2617001939.cidr_blocks.#:                     "1"
ingress.2617001939.cidr_blocks.0:                     "0.0.0.0/0"
ingress.2617001939.description:                       ""
ingress.2617001939.from_port:                         "443"
ingress.2617001939.ipv6_cidr_blocks.#:                "0"
ingress.2617001939.protocol:                          "tcp"
ingress.2617001939.security_groups.#:                 "0"
ingress.2617001939.self:                              "false"
ingress.2617001939.to_port:                           "443"
name:                                                 "globex-production-alb"
owner_id:                                             <computed>
revoke_rules_on_delete:                               "false"
vpc_id:                                               "vpc-e365d769"

+ module.globex_production_load_balancer.aws_security_group_rule.http_ingress_on_instances_from_load_balancer
id:                                                   <computed>
from_port:                                            "80"
protocol:                                             "tcp"
security_group_id:                                    "sg-264269ad"
self:                                                 "false"
source_security_group_id:                             "${aws_security_group.security_group_on_load_balancer.id}"
to_port:                                              "80"
type:                                                 "ingress"

+ module.globex_production_load_balancer.aws_security_group_rule.https_ingress_on_instances_from_load_balancer
id:                                                   <computed>
from_port:                                            "443"
protocol:                                             "tcp"
security_group_id:                                    "sg-264269ad"
self:                                                 "false"
source_security_group_id:                             "${aws_security_group.security_group_on_load_balancer.id}"
to_port:                                              "443"
type:                                                 "ingress"

+ module.initech_production_load_balancer.aws_alb_listener.http_listener
id:                                                   <computed>
arn:                                                  <computed>
default_action.#:                                     "1"
default_action.0.target_group_arn:                    "${aws_alb_target_group.http_target_group.arn}"
default_action.0.type:                                "forward"
load_balancer_arn:                                    "${module.load_balancer.arn}"
port:                                                 "80"
protocol:                                             "HTTP"
ssl_policy:                                           <computed>

+ module.initech_production_load_balancer.aws_alb_listener.https_listener
id:                                                   <computed>
arn:                                                  <computed>
certificate_arn:                                      "arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012"
default_action.#:                                     "1"
default_action.0.target_group_arn:                    "${var.https_target_group ? element(concat(aws_alb_target_group.https_target_group.*.arn, list(\"\")), 0) : aws_alb_target_group.http_target_group.arn}"
default_action.0.type:                                "forward"
load_balancer_arn:                                    "${module.load_balancer.arn}"
port:                                                 "443"
protocol:                                             "HTTPS"
ssl_policy:                                           "ELBSecurityPolicy-TLS-1-2-2017-01"

+ module.initech_production_load_balancer.aws_alb_target_group.http_target_group
id:                                                   <computed>
arn:                                                  <computed>
arn_suffix:                                           <computed>
deregistration_delay:                                 "30"
health_check.#:                                       "1"
health_check.0.healthy_threshold:                     "3"
health_check.0.interval:                              "30"
health_check.0.matcher:                               "200,301"
health_check.0.path:                                  "/healthz"
health_check.0.port:                                  "80"
health_check.0.protocol:                              "HTTP"
health_check.0.timeout:                               "5"
health_check.0.unhealthy_threshold:                   "3"
name:                                                 "initech-production-http"
port:                                                 "80"
protocol:                                             "HTTP"
proxy_protocol_v2:                                    "false"
slow_start:                                           "0"
stickiness.#:                                         <computed>
target_type:                                          "instance"
vpc_id:                                               "vpc-eed63643"

+ module.initech_production_load_balancer.aws_alb_target_group.https_target_group
id:                                                   <computed>
arn:                                                  <computed>
arn_suffix:                                           <computed>
deregistration_delay:                                 "30"
health_check.#:                                       "1"
health_check.0.healthy_threshold:                     "3"
health_check.0.interval:                              "30"
health_check.0.matcher:                               "200,301"
health_check.0.path:                                  "/healthz"
health_check.0.port:                                  "443"
health_check.0.protocol:                              "HTTPS"
health_check.0.timeout:                               "5"
health_check.0.unhealthy_threshold:                   "3"
name:                                                 "initech-production-https"
port:                                                 "443"
protocol:                                             "HTTPS"
proxy_protocol_v2:                                    "false"
slow_start:                                           "0"
stickiness.#:                                         <computed>
target_type:                                          "instance"
vpc_id:                                               "vpc-eed63643"

+ module.initech_production_load_balancer.aws_alb_target_group_attachment.http_target_group_attachments[0]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.http_target_group.arn}"
target_id:                                            "i-09731747ba5296355"

+ module.initech_production_load_balancer.aws_alb_target_group_attachment.http_target_group_attachments[1]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.http_target_group.arn}"
target_id:                                            "i-0354a7616ba0dc1af"

+ module.initech_production_load_balancer.aws_alb_target_group_attachment.https_target_group_attachments[0]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.https_target_group.arn}"
target_id:                                            "i-09731747ba5296355"

+ module.initech_production_load_balancer.aws_alb_target_group_attachment.https_target_group_attachments[1]
id:                                                   <computed>
target_group_arn:                                     "${aws_alb_target_group.https_target_group.arn}"
target_id:                                            "i-0354a7616ba0dc1af"

+ module.initech_production_load_balancer.aws_security_group.security_group_on_load_balancer
id:                                                   <computed>
arn:                                                  <computed>
description:                                          "Managed by Terraform"
egress.#:                                             "1"
egress.1010347201.cidr_blocks.#:                      "0"
egress.1010347201.description:                        ""
egress.1010347201.from_port:                          "0"
egress.1010347201.ipv6_cidr_blocks.#:                 "0"
egress.1010347201.prefix_list_ids.#:                  "0"
egress.1010347201.protocol:                           "tcp"
egress.1010347201.security_groups.#:                  "1"
egress.1010347201.security_groups.686130460:          "sg-c94a8777"
egress.1010347201.self:                               "false"
egress.1010347201.to_port:                            "65535"
ingress.#:                                            "2"
ingress.2214680975.cidr_blocks.#:                     "1"
ingress.2214680975.cidr_blocks.0:                     "0.0.0.0/0"
ingress.2214680975.description:                       ""
ingress.2214680975.from_port:                         "80"
ingress.2214680975.ipv6_cidr_blocks.#:                "0"
ingress.2214680975.protocol:                          "tcp"
ingress.2214680975.security_groups.#:                 "0"
ingress.2214680975.self:                              "false"
ingress.2214680975.to_port:                           "80"
ingress.2617001939.cidr_blocks.#:                     "1"
ingress.2617001939.cidr_blocks.0:                     "0.0.0.0/0"
ingress.2617001939.description:                       ""
ingress.2617001939.from_port:                         "443"
ingress.2617001939.ipv6_cidr_blocks.#:                "0"
ingress.2617001939.protocol:                          "tcp"
ingress.2617001939.security_groups.#:                 "0"
ingress.2617001939.self:                              "false"
ingress.2617001939.to_port:                           "443"
name:                                                 "initech-production-alb"
owner_id:                                             <computed>
revoke_rules_on_delete:                               "false"
vpc_id:                                               "vpc-eed63643"

+ module.initech_production_load_balancer.aws_security_group_rule.http_ingress_on_instances_from_load_balancer
id:                                                   <computed>
from_port:                                            "80"
protocol:                                             "tcp"
security_group_id:                                    "sg-c94a8777"
self:                                                 "false"
source_security_group_id:                             "${aws_security_group.security_group_on_load_balancer.id}"
to_port:                                              "80"
type:                                                 "ingress"

+ module.initech_production_load_balancer.aws_security_group_rule.https_ingress_on_instances_from_load_balancer
id:                                                   <computed>
from_port:                                            "443"
protocol:                                             "tcp"
security_group_id:                                    "sg-c94a8777"
self:                                                 "false"
source_security_group_id:                             "${aws_security_group.security_group_on_load_balancer.id}"
to_port:                                              "443"
type:                                                 "ingress"

+ module.acme_staging_load_balancer.module.load_balancer.aws_alb.load_balancer
id:                                                   <computed>
access_logs.#:                                        <computed>
arn:                                                  <computed>
arn_suffix:                                           <computed>
dns_name:                                             <computed>
enable_deletion_protection:                           "false"
enable_http2:                                         "true"
idle_timeout:                                         "60"
internal:                                             "false"
ip_address_type:                                      <computed>
load_balancer_type:                                   "application"
name:                                                 "acme-staging"
security_groups.#:                                    <computed>
subnet_mapping.#:                                     <computed>
subnets.#:                                            "2"
subnets.2108278916:                                   "subnet-9ce530b1"
subnets.2228813381:                                   "subnet-6fbdeeb3"
vpc_id:                                               <computed>
zone_id:                                              <computed>

+ module.globex_production_load_balancer.module.load_balancer.aws_alb.load_balancer
id:                                                   <computed>
access_logs.#:                                        <computed>
arn:                                                  <computed>
arn_suffix:                                           <computed>
dns_name:                                             <computed>
enable_deletion_protection:                           "false"
enable_http2:                                         "true"
idle_timeout:                                         "60"
internal:                                             "true"
ip_address_type:                                      <computed>
load_balancer_type:                                   "application"
name:                                                 "globex-production"
security_groups.#:                                    <computed>
subnet_mapping.#:                                     <computed>
subnets.#:                                            "2"
subnets.1357166935:                                   "subnet-e3f4a330"
subnets.881182305:                                    "subnet-9b6635ea"
vpc_id:                                               <computed>
zone_id:                                              <computed>

+ module.initech_production_load_balancer.module.load_balancer.aws_alb.load_balancer_with_access_logs
id:                                                   <computed>
access_logs.#:                                        "1"
access_logs.0.bucket:                                 "${aws_s3_bucket.load_balancer_access_logs.id}"
access_logs.0.enabled:                                "true"
arn:                                                  <computed>
arn_suffix:                                           <computed>
dns_name:                                             <computed>
enable_deletion_protection:                           "false"
enable_http2:                                         "true"
idle_timeout:                                         "60"
internal:                                             "false"
ip_address_type:                                      <computed>
load_balancer_type:                                   "application"
name:                                                 "initech-production"
security_groups.#:                                    <computed>
subnet_mapping.#:                                     <computed>
subnets.#:                                            "2"
subnets.2108278916:                                   "subnet-9ce530b1"
subnets.2228813381:                                   "subnet-6fbdeeb3"
vpc_id:                                               <computed>
zone_id:                                              <computed>

+ module.initech_production_load_balancer.module.load_balancer.aws_s3_bucket.load_balancer_access_logs
id:                                                   <computed>
acceleration_status:                                  <computed>
acl:                                                  "private"
arn:                                                  <computed>
bucket:                                               "initech-production-logs"
bucket_domain_name:                                   <computed>
bucket_regional_domain_name:                          <computed>
force_destroy:                                        "false"
hosted_zone_id:                                       <computed>
lifecycle_rule.#:                                     "1"
lifecycle_rule.0.enabled:                             "true"
lifecycle_rule.0.id:                                  <computed>
lifecycle_rule.0.transition.#:                        "1"
lifecycle_rule.0.transition.2207330492.date:          ""
lifecycle_rule.0.transition.2207330492.days:          "365"
lifecycle_rule.0.transition.2207330492.storage_class: "GLACIER"
region:                                               <computed>
request_payer:                                        <computed>
versioning.#:                                         <computed>
website_domain:                                       <computed>
website_endpoint:                                     <computed>

+ module.initech_production_load_balancer.module.load_balancer.aws_s3_bucket_policy.load_balancer_access_logs
id:                                                   <computed>
bucket:                                               "${aws_s3_bucket.load_balancer_access_logs.id}"
policy:                                               "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:PutObject\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"${aws_s3_bucket.load_balancer_access_logs.arn}/AWSLogs/${data.aws_caller_identity.aws_account.account_id}/*\",\n      \"Principal\": {\n        \"AWS\": [\n          \"arn:aws:iam::${lookup(local.elastic_load_balancing_account_ids, aws_s3_bucket.load_balancer_access_logs.region)}:root\"\n        ]\n      }\n    }\n  ]\n}\n"
Plan: 38 to add, 0 to change, 0 to destroy.

